(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["node-modules/@dcloudio/uni-cli-shared/components/unicloud-db"],{

/***/ 303:
/*!**************************************************************************!*\
  !*** ./node_modules/@dcloudio/uni-cli-shared/components/unicloud-db.vue ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./unicloud-db.vue?vue&type=template&id=6abf80b8& */ 304);
/* harmony import */ var _unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unicloud-db.vue?vue&type=script&lang=js& */ 306);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 19);

var renderjs




/* normalize component */

var component = Object(_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__["render"],
  _unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null,
  false,
  _unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/uni-cli-shared/components/unicloud-db.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 304:
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/uni-cli-shared/components/unicloud-db.vue?vue&type=template&id=6abf80b8& ***!
  \*********************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_webpack_uni_mp_loader_lib_template_js_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../webpack-uni-mp-loader/lib/template.js!../../vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../webpack-uni-mp-loader/lib/style.js!./unicloud-db.vue?vue&type=template&id=6abf80b8& */ 305);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_webpack_uni_mp_loader_lib_template_js_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_webpack_uni_mp_loader_lib_template_js_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_webpack_uni_mp_loader_lib_template_js_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_webpack_uni_mp_loader_lib_template_js_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_template_id_6abf80b8___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 305:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./node_modules/@dcloudio/uni-cli-shared/components/unicloud-db.vue?vue&type=template&id=6abf80b8& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  if (_vm.$scope.data.scopedSlotsCompiler === "augmented") {
    _vm.$setScopedSlotsParams("default", {
      options: _vm.options,
      data: _vm.dataList,
      pagination: _vm.paginationInternal,
      loading: _vm.loading,
      hasMore: _vm.hasMore,
      error: _vm.errorMessage
    })
  }
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 306:
/*!***************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/uni-cli-shared/components/unicloud-db.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_loader_lib_index_js_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_webpack_uni_mp_loader_lib_script_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../babel-loader/lib!../../vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../webpack-uni-mp-loader/lib/script.js!../../vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../webpack-uni-mp-loader/lib/style.js!./unicloud-db.vue?vue&type=script&lang=js& */ 307);
/* harmony import */ var _babel_loader_lib_index_js_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_webpack_uni_mp_loader_lib_script_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_loader_lib_index_js_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_webpack_uni_mp_loader_lib_script_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _babel_loader_lib_index_js_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_webpack_uni_mp_loader_lib_script_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _babel_loader_lib_index_js_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_webpack_uni_mp_loader_lib_script_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_babel_loader_lib_index_js_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_webpack_uni_mp_loader_lib_script_js_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_webpack_uni_mp_loader_lib_style_js_unicloud_db_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 307:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./node_modules/@dcloudio/uni-cli-shared/components/unicloud-db.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni, uniCloud) {Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;













var _uniI18n = __webpack_require__(/*! @dcloudio/uni-i18n */ 15);
var _index = _interopRequireDefault(__webpack_require__(/*! ./i18n/index */ 308));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _toConsumableArray(arr) {return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();}function _nonIterableSpread() {throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _iterableToArray(iter) {if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);}function _arrayWithoutHoles(arr) {if (Array.isArray(arr)) return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}var _initVueI18n =

(0, _uniI18n.initVueI18n)(_index.default),t = _initVueI18n.t;

var events = {
  load: 'load',
  error: 'error' };

var pageMode = {
  add: 'add',
  replace: 'replace' };

var loadMode = {
  auto: 'auto',
  onready: 'onready',
  manual: 'manual' };


var attrs = [
'pageCurrent',
'pageSize',
'collection',
'action',
'field',
'getcount',
'orderby',
'where',
'groupby',
'groupField',
'distinct'];var _default2 =


{
  name: 'UniClouddb',
  props: {
    options: {
      type: [Object, Array],
      default: function _default() {
        return {};
      } },

    collection: {
      type: String,
      default: '' },

    action: {
      type: String,
      default: '' },

    field: {
      type: String,
      default: '' },

    orderby: {
      type: String,
      default: '' },

    where: {
      type: [String, Object],
      default: '' },

    pageData: {
      type: String,
      default: 'add' },

    pageCurrent: {
      type: Number,
      default: 1 },

    pageSize: {
      type: Number,
      default: 20 },

    getcount: {
      type: [Boolean, String],
      default: false },

    getone: {
      type: [Boolean, String],
      default: false },

    gettree: {
      type: [Boolean, String, Object],
      default: false },

    gettreepath: {
      type: [Boolean, String],
      default: false },

    startwith: {
      type: String,
      default: '' },

    limitlevel: {
      type: Number,
      default: 10 },

    groupby: {
      type: String,
      default: '' },

    groupField: {
      type: String,
      default: '' },

    distinct: {
      type: [Boolean, String],
      default: false },

    pageIndistinct: {
      type: [Boolean, String],
      default: false },

    foreignKey: {
      type: String,
      default: '' },

    loadtime: {
      type: String,
      default: 'auto' },

    manual: {
      type: Boolean,
      default: false } },


  data: function data() {
    return {
      loading: false,
      hasMore: false,
      dataList: this.getone ? undefined : [],
      paginationInternal: {},
      errorMessage: '' };

  },
  created: function created() {var _this = this;
    this._isEnded = false;
    this.paginationInternal = {
      current: this.pageCurrent,
      size: this.pageSize,
      count: 0 };


    this.$watch(function () {
      var al = [];
      attrs.forEach(function (key) {
        al.push(_this[key]);
      });
      return al;
    }, function (newValue, oldValue) {
      if (_this.loadtime === loadMode.manual) {
        return;
      }

      _this.paginationInternal.size = _this.pageSize;

      var needReset = false;
      for (var i = 2; i < newValue.length; i++) {
        if (newValue[i] !== oldValue[i]) {
          needReset = true;
          break;
        }
      }
      if (needReset) {
        _this.clear();
        _this.reset();
      }
      if (newValue[0] !== oldValue[0]) {
        _this.paginationInternal.current = _this.pageCurrent;
      }

      _this._execLoadData();
    });









































    if (!this.manual && this.loadtime === loadMode.auto) {
      this.loadData();
    }
  },














  methods: {
    loadData: function loadData(args1, args2) {
      var callback = null;
      var clear = false;
      if (typeof args1 === 'object') {
        if (args1.clear) {
          if (this.pageData === pageMode.replace) {
            this.clear();
          } else {
            clear = args1.clear;
          }
          this.reset();
        }
        if (args1.current !== undefined) {
          this.paginationInternal.current = args1.current;
        }
        if (typeof args2 === 'function') {
          callback = args2;
        }
      } else if (typeof args1 === 'function') {
        callback = args1;
      }

      this._execLoadData(callback, clear);
    },
    loadMore: function loadMore() {
      if (this._isEnded || this.loading) {
        return;
      }

      if (this.pageData === pageMode.add) {
        this.paginationInternal.current++;
      }

      this._execLoadData();
    },
    refresh: function refresh() {
      this.clear();
      this._execLoadData();
    },
    clear: function clear() {
      this._isEnded = false;
      this.dataList = [];
    },
    reset: function reset() {
      this.paginationInternal.current = 1;
    },
    add: function add(value)









    {var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},action = _ref.action,_ref$showToast = _ref.showToast,showToast = _ref$showToast === void 0 ? true : _ref$showToast,toastTitle = _ref.toastTitle,success = _ref.success,fail = _ref.fail,complete = _ref.complete,_ref$needConfirm = _ref.needConfirm,needConfirm = _ref$needConfirm === void 0 ? true : _ref$needConfirm,_ref$needLoading = _ref.needLoading,needLoading = _ref$needLoading === void 0 ? true : _ref$needLoading,_ref$loadingTitle = _ref.loadingTitle,loadingTitle = _ref$loadingTitle === void 0 ? '' : _ref$loadingTitle;
      if (needLoading) {
        uni.showLoading({
          title: loadingTitle });

      }
      /* eslint-disable no-undef */
      var db = uniCloud.database();
      if (action) {
        db = db.action(action);
      }

      db.collection(this._getCollection()).add(value).then(function (res) {
        success && success(res);
        if (showToast) {
          uni.showToast({
            title: toastTitle || t('uniCloud.component.add.success') });

        }
      }).catch(function (err) {
        fail && fail(err);
        if (needConfirm) {
          uni.showModal({
            content: err.message,
            showCancel: false });

        }
      }).finally(function () {
        if (needLoading) {
          uni.hideLoading();
        }
        complete && complete();
      });
    },
    remove: function remove(id)









    {var _this2 = this;var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},action = _ref2.action,_success = _ref2.success,fail = _ref2.fail,complete = _ref2.complete,confirmTitle = _ref2.confirmTitle,confirmContent = _ref2.confirmContent,_ref2$needConfirm = _ref2.needConfirm,needConfirm = _ref2$needConfirm === void 0 ? true : _ref2$needConfirm,_ref2$needLoading = _ref2.needLoading,needLoading = _ref2$needLoading === void 0 ? true : _ref2$needLoading,_ref2$loadingTitle = _ref2.loadingTitle,loadingTitle = _ref2$loadingTitle === void 0 ? '' : _ref2$loadingTitle;
      if (!id || !id.length) {
        return;
      }
      if (!needConfirm) {
        this._execRemove(id, action, _success, fail, complete, needConfirm, needLoading, loadingTitle);
        return;
      }
      uni.showModal({
        title: confirmTitle || t('uniCloud.component.remove.showModal.title'),
        content: confirmContent || t('uniCloud.component.remove.showModal.content'),
        showCancel: true,
        success: function success(res) {
          if (!res.confirm) {
            return;
          }
          _this2._execRemove(id, action, _success, fail, complete, needConfirm, needLoading, loadingTitle);
        } });

    },
    update: function update(id, value)









    {var _ref3 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},action = _ref3.action,_ref3$showToast = _ref3.showToast,showToast = _ref3$showToast === void 0 ? true : _ref3$showToast,toastTitle = _ref3.toastTitle,success = _ref3.success,fail = _ref3.fail,complete = _ref3.complete,_ref3$needConfirm = _ref3.needConfirm,needConfirm = _ref3$needConfirm === void 0 ? true : _ref3$needConfirm,_ref3$needLoading = _ref3.needLoading,needLoading = _ref3$needLoading === void 0 ? true : _ref3$needLoading,_ref3$loadingTitle = _ref3.loadingTitle,loadingTitle = _ref3$loadingTitle === void 0 ? '' : _ref3$loadingTitle;
      if (needLoading) {
        uni.showLoading({
          title: loadingTitle });

      }
      /* eslint-disable no-undef */
      var db = uniCloud.database();
      if (action) {
        db = db.action(action);
      }

      return db.collection(this._getCollection()).doc(id).update(value).then(function (res) {
        success && success(res);
        if (showToast) {
          uni.showToast({
            title: toastTitle || t('uniCloud.component.update.success') });

        }
      }).catch(function (err) {
        fail && fail(err);
        if (needConfirm) {
          uni.showModal({
            content: err.message,
            showCancel: false });

        }
      }).finally(function () {
        if (needLoading) {
          uni.hideLoading();
        }
        complete && complete();
      });
    },
    getTemp: function getTemp() {var isTemp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      /* eslint-disable no-undef */
      var db = uniCloud.database();

      if (this.action) {
        db = db.action(this.action);
      }

      db = db.collection(this.collection);

      if (!(!this.where || !Object.keys(this.where).length)) {
        db = db.where(this.where);
      }
      if (this.field) {
        db = db.field(this.field);
      }
      if (this.foreignKey) {
        db = db.foreignKey(this.foreignKey);
      }
      if (this.groupby) {
        db = db.groupBy(this.groupby);
      }
      if (this.groupField) {
        db = db.groupField(this.groupField);
      }
      if (this.distinct === true) {
        db = db.distinct();
      }
      if (this.orderby) {
        db = db.orderBy(this.orderby);
      }var _this$paginationInter =




      this.paginationInternal,current = _this$paginationInter.current,size = _this$paginationInter.size;
      var getOptions = {};
      if (this.getcount) {
        getOptions.getCount = this.getcount;
      }
      var treeOptions = {
        limitLevel: this.limitlevel,
        startWith: this.startwith };

      if (this.gettree) {
        getOptions.getTree = treeOptions;
      }
      if (this.gettreepath) {
        getOptions.getTreePath = treeOptions;
      }
      db = db.skip(size * (current - 1)).limit(size);

      if (isTemp) {
        db = db.getTemp(getOptions);
        db.udb = this;
      } else {
        db = db.get(getOptions);
      }

      return db;
    },
    setResult: function setResult(result) {
      if (result.code === 0) {
        this._execLoadDataSuccess(result);
      } else {
        this._execLoadDataFail(new Error(result.message));
      }
    },
    _execLoadData: function _execLoadData(callback, clear) {var _this3 = this;
      if (this.loading) {
        return;
      }
      this.loading = true;
      this.errorMessage = '';

      this._getExec().then(function (res) {
        _this3.loading = false;
        _this3._execLoadDataSuccess(res.result, callback, clear);












      }).catch(function (err) {
        _this3.loading = false;
        _this3._execLoadDataFail(err, callback);
      });
    },
    _execLoadDataSuccess: function _execLoadDataSuccess(result, callback, clear) {var

      data =

      result.data,count = result.count;
      this._isEnded = data.length < this.pageSize;
      this.hasMore = !this._isEnded;

      var data2 = this.getone ? data.length ? data[0] : undefined : data;

      if (this.getcount) {
        this.paginationInternal.count = count;
      }

      callback && callback(data2, this._isEnded, this.paginationInternal);
      this._dispatchEvent(events.load, data2);

      if (this.getone || this.pageData === pageMode.replace) {
        this.dataList = data2;
      } else {
        if (clear) {
          this.dataList = data2;
        } else {var _this$dataList;
          (_this$dataList = this.dataList).push.apply(_this$dataList, _toConsumableArray(data2));
        }
      }
    },
    _execLoadDataFail: function _execLoadDataFail(err, callback) {
      this.errorMessage = err;
      callback && callback();
      this.$emit(events.error, err);
      if (true) {
        console.error(err);
      }
    },
    _getExec: function _getExec() {
      return this.getTemp(false);
    },
    _execRemove: function _execRemove(id, action, success, fail, complete, needConfirm, needLoading, loadingTitle) {var _this4 = this;
      if (!this.collection || !id) {
        return;
      }

      var ids = Array.isArray(id) ? id : [id];
      if (!ids.length) {
        return;
      }

      if (needLoading) {
        uni.showLoading({
          mask: true,
          title: loadingTitle });

      }

      /* eslint-disable no-undef */
      var db = uniCloud.database();
      var dbCmd = db.command;

      var exec = db;
      if (action) {
        exec = exec.action(action);
      }

      exec.collection(this._getCollection()).where({
        _id: dbCmd.in(ids) }).
      remove().then(function (res) {
        success && success(res.result);
        if (_this4.pageData === pageMode.replace) {
          _this4.refresh();
        } else {
          _this4.removeData(ids);
        }
      }).catch(function (err) {
        fail && fail(err);
        if (needConfirm) {
          uni.showModal({
            content: err.message,
            showCancel: false });

        }
      }).finally(function () {
        if (needLoading) {
          uni.hideLoading();
        }
        complete && complete();
      });
    },
    _getCollection: function _getCollection() {
      var index = this.collection.indexOf(',');
      var collection = index > 0 ? this.collection.substring(0, index) : this.collection;
      return collection;
    },
    removeData: function removeData(ids) {
      var il = ids.slice(0);
      var dl = this.dataList;
      for (var i = dl.length - 1; i >= 0; i--) {
        var index = il.indexOf(dl[i]._id);
        if (index >= 0) {
          dl.splice(i, 1);
          il.splice(index, 1);
        }
      }
    },
    _dispatchEvent: function _dispatchEvent(type, data) {
      if (this._changeDataFunction) {
        this._changeDataFunction(data, this._isEnded, this.paginationInternal);
      } else {
        this.$emit(type, data, this._isEnded, this.paginationInternal);
      }
    } } };exports.default = _default2;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"], __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js */ 9)["default"]))

/***/ })

}]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/node-modules/@dcloudio/uni-cli-shared/components/unicloud-db.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'node-modules/@dcloudio/uni-cli-shared/components/unicloud-db-create-component',
    {
        'node-modules/@dcloudio/uni-cli-shared/components/unicloud-db-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(303))
        })
    },
    [['node-modules/@dcloudio/uni-cli-shared/components/unicloud-db-create-component']]
]);
